<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lixuecheng.mapper.ArtcleMapper">

	<resultMap type="acticle" id="articleMapper">
		<result property="channelId"  column="channel_id" />
		<result property="categoryId"  column="category_id" />

		<association property="channel" column="channel_id"
javaType="com.lixuecheng.entity.Channel" select="findChannel"></association>
		
		<association property="category" column="category_id"
javaType="com.lixuecheng.entity.Category" select="findCategory"></association>

	</resultMap>

	<select id="listByUser" resultMap="articleMapper">

		select id,title,channel_id,category_id,created,STATUS

		from cms_article where user_id=#{id}   AND  deleted=0
		
	    ORDER BY id desc   

	</select>
	<!-- 获取频道信息 -->
	<select id="findChannel"  resultType="channel">
	  select   id,name  from   cms_channel   where   id=#{id};
	</select>
	
	<!-- 获取分类信息 -->
	<select id="findCategory"  resultType="category">
	  select   id,name  from   cms_category   where   id=#{id};
	</select>

</mapper>